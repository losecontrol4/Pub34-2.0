<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="shortcut icon" href="../images/logo.PNG" type="image/x-icon" />
    <link rel="icon" href="../images/logo.PNG" />
    <link rel="stylesheet" href="../menu_style.css" />
  </head>
  <body ondblclick="openNewTab()" id="body">
    <img
      src="../Images/Pub34MenuImages/Pub34MenuFINAL-1.jpg"
      alt="menu page 1"
    />
    <img
      src="../Images/Pub34MenuImages/Pub34MenuFINAL-2.jpg"
      alt="menu page 2"
    />
    <img
      src="../Images/Pub34MenuImages/Pub34MenuFINAL-3.jpg"
      alt="menu page 3"
    />

    <script>
      let lastCall = 0;
      function openNewTab() {
        //opens this page in a new tab (to be triggered on double) if it is being display in an iframe.
        if (window.location !== window.parent.location) {
          let curr = new Date().getTime(); //some devices like iphone will call this function with both methods, therefore this prevents the function from being called twice
          let lastCallLength = curr - lastCall;
          if (lastCallLength > 200 || lastCall == 0) {
            window.open("menu.html", "_blank");
          }
          lastCall = curr;
        }
      }

      let timeout;
      let lastTap = 0;

      document
        .getElementById("body")
        .addEventListener("touchend", function (event) {
          // for double tap on mobile
          let currentTime = new Date().getTime();
          let tapLength = currentTime - lastTap;
          clearTimeout(timeout);
          if (tapLength < 500 && tapLength > 0) {
            event.preventDefault();
            openNewTab();
          } else {
            timeout = setTimeout(function () {
              clearTimeout(timeout);
            }, 500);
          }
          lastTap = currentTime;
        });

      let press = 0;
      let release = 0;

      document
        .getElementById("body")
        .addEventListener("touchstart", function (event) {
          //for long tap on mobile
          press = new Date().getTime();
        });

      document
        .getElementById("body")
        .addEventListener("touchend", function (event) {
          //for long tap on mobile
          release = new Date().getTime();
          if (release - press > 50) {
            event.preventDefault();
            openNewTab();
          }
          console.log(release - press);
        });
    </script>
  </body>
</html>
